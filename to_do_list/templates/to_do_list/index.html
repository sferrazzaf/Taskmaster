{% load staticfiles %}

<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <script type="text/javascript" src="{% static 'to_do_list/to_do_list.js' %}"></script>
    <link rel="stylesheet" type="text/css"
    href="{% static 'to_do_list/to_do_list.css' %}"/>
    <title>TaskMaster 2017</title>
</head>
    <body>
        <div id=header>
            <center><h1>{{ tasklist.name }} </h1></center>
            <form id="entertask" action="/todolist/{{ tasklist.id }}/"
            method="post">
                {% csrf_token %}
                {{ form }}
                <input type="submit" value="Submit" />
            </form>
            <div id=displayedtask>
              <div id=currenttask>Current task: {{ currenttask.text }}</div>
              <div id=taskstartedtime
                >Started time: {{ currenttask.created }}</div>
            </div>

            <form action="pausetask/" method="POST">{%csrf_token %}
              <input type="hidden" name="taskid" value="{{ currenttask.id}}"
              ><input type="submit" value="Pause Task">
            </form>
            <form action="finishtask/" method="POST">{%csrf_token%}
              <input type="hidden" name="taskid" value="{{ currenttask.id }}"
              ><input type="submit" value="Finish Task">
            </form>
          </div><table style="100%">
                <thead>
                  <th>Task</th>
                  <th>Priority</th>
                  <th>Date Created</th>
                  <th>Est. Duration</th>
                  <th>Date Completed</th>
                </thead>
                    <tbody id=tasklist>
                        {% for task in tasks %}
                            <tr class=task data-id={{ task.id }}
                            data-priority={{ task.priority }}
                            data-tasklist={{ task.tasklist.id }}>
                                <td class=taskname>{{ task.text }}</td><td
                                  class=priority
                                >PRIORITY: {{ task.priority }}</td><td
                                >CREATED: {{ task.created }}</td><td
                                >DURATION: {{ task.duration }}</td><td
                                >COMPLETED: {{ task.completed }}</td
                                ><td><form action="togglecurrent/" 
                                  method="POST">{%csrf_token %}
                                  <input type="hidden" name="taskid"
                                  value="{{ task.id }}"
                                  ><input type="submit" value="Work on Task">
                                </form></td
                                ><td><button class=deletetask
                                  >Delete Task</button></td>
                            </tr>
                        {% endfor %}
                    </tbody>
            </table>
        </div>

    </body>
    <div id=finishedtasks>
        Dummy text finished tasks will go here
        task start finish duration
    </div>
</html>
